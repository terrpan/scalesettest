# ------------------------------------------------------------------
# scaleset -- configuration file
# ------------------------------------------------------------------
# Copy this file to config.yaml and fill in the values.
# CLI flags override any value set here.
# ------------------------------------------------------------------

github:
  # Full URL where the scale set is registered.
  # Can be a repo, org, or enterprise URL.
  url: "https://github.com/org/repo"

  # --- Authentication (pick ONE) ---

  # Option 1: GitHub App (recommended)
  app:
    client_id: ""
    installation_id: 0
    # Path to the PEM file containing the app's private key.
    private_key_path: ""
    # Or inline (not recommended for production):
    # private_key: |
    #   -----BEGIN RSA PRIVATE KEY-----
    #   ...
    #   -----END RSA PRIVATE KEY-----

  # Option 2: Personal Access Token
  # token: "ghp_..."

scaleset:
  # Name of the scale set. Workflows target it via runs-on: <name>.
  name: "my-scaleset"

  # Extra labels for workflow targeting. Defaults to [name] if empty.
  labels: []

  # Runner group to register in. "default" uses the built-in group.
  runner_group: "default"

  # Runner count bounds.
  min_runners: 0
  max_runners: 10

engine:
  # Compute backend configuration.
  # Exactly one engine must have "enable: true".
  # Available: docker, gcp
  # Planned: aws, azure

  docker:
    # Enable the Docker engine.
    enable: true

    # Container image for the runner.
    # Use ":latest" (default) for the newest release, or pin a specific version:
    #   "ghcr.io/actions/actions-runner:latest"     # Always latest
    #   "ghcr.io/actions/actions-runner:2.323.0"    # Pin to v2.323.0
    image: "ghcr.io/actions/actions-runner:latest"

    # Enable Docker-in-Docker by bind-mounting the host's Docker socket
    # (/var/run/docker.sock) into each runner container.  This lets
    # workflows run docker build, docker compose, container actions, etc.
    #
    # Security: the socket gives runners full access to the host Docker
    # daemon.  Only enable if you trust the workflows running on these
    # runners.
    dind: false

  gcp:
    # Enable the GCP Compute Engine backend.
    enable: false

    # GCP project ID (required when enabled).
    project: "my-project"

    # Zone for runner VMs (required when enabled).
    zone: "us-central1-a"

    # Machine type for runner VMs.  Default: "e2-medium".
    machine_type: "e2-medium"

    # Full image self-link or family URL (required when enabled).
    # Use a family URL to always get the latest image:
    #   Linux:   "projects/my-project/global/images/family/scaleset-runner"
    #   Windows: "projects/my-project/global/images/family/scaleset-runner-windows"
    # Or pin to a specific image:
    #   "projects/my-project/global/images/scaleset-runner-1234567890"
    image: "projects/my-project/global/images/family/scaleset-runner"

    # Boot disk size in GB.  Default: 50.
    disk_size_gb: 50

    # VPC network name.  Default: "default".
    network: "default"

    # Subnetwork (optional).  If empty, the default subnet for the
    # zone is used.
    # subnet: "projects/my-project/regions/us-central1/subnetworks/my-subnet"

    # Whether runner VMs get an external IP.  Default: true.
    public_ip: true

    # Service account to attach to runner VMs (optional).
    # If empty, the project's default compute service account is used.
    # service_account: "runner@my-project.iam.gserviceaccount.com"

    # Authentication: uses Application Default Credentials (ADC).
    # No credential fields needed.  See docs/gcp/README.md for setup.

  aws:
    # Enable the AWS EC2 backend (not yet implemented).
    enable: false

    # AWS region (e.g. "us-east-1").
    region: "us-east-1"

    # AMI ID for the runner image (e.g. "ami-0c55b159cbfafe1f0").
    image: "ami-0c55b159cbfafe1f0"

    # EC2 instance type (e.g. "t3.medium").
    instance_type: "t3.medium"

    # Root volume size in GB.  Default: 50.
    disk_size_gb: 50

  azure:
    # Enable the Azure VM backend (not yet implemented).
    enable: false

    # Azure subscription ID.
    subscription_id: "00000000-0000-0000-0000-000000000000"

    # Resource group name.
    resource_group: "scaleset"

    # Azure image reference (e.g. "MicrosoftWindowsServer:WindowsServer:2019-Datacenter:latest").
    image: "MicrosoftWindowsServer:WindowsServer:2019-Datacenter:latest"

    # Azure VM size (e.g. "Standard_DS2_v2").
    vm_size: "Standard_DS2_v2"

    # OS disk size in GB.  Default: 50.
    disk_size_gb: 50


logging:
  # debug | info | warn | error
  level: "info"
  # text | json
  format: "text"

# ------------------------------------------------------------------
# OpenTelemetry (tracing and metrics)
# ------------------------------------------------------------------
# otel:
#   # Enable OpenTelemetry tracing and metrics.  Default: false.
#   enabled: false
#
#   # OTLP HTTP endpoint (e.g. Grafana Alloy, OTEL Collector).
#   # If empty, uses OTEL_EXPORTER_OTLP_ENDPOINT env var.  Default: "".
#   endpoint: "localhost:4318"
#
#   # Use plain HTTP (no TLS) for OTLP export.  Default: true.
#   insecure: true
#
#   # Also print traces/metrics to stdout (debugging).  Default: false.
#   # stdout: true

# ------------------------------------------------------------------
# Prometheus
# ------------------------------------------------------------------
# prometheus:
#   # Enable the Prometheus /metrics scrape endpoint.
#   # This works independently of the otel section -- you can use
#   # Prometheus without OTLP tracing, or both together.
#   enable: false
#
#   # Port for the /metrics HTTP endpoint.  Default: 9090.
#   port: 9090

